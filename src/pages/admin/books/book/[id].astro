---
import Layout from '../../../../layouts/Layout.astro'
import DeleteBook from '../../../../components/logic/DeleteBook.svelte'

export const prerendered = false

interface Book {
  id: string
  name: string
  author: string
  pages: string
  year: string
}

const { id } = Astro.params

const response = await fetch(`http://localhost:3000/search/books/${id}`)
const data= await response.json()
const book: Book = data[0]
---

<Layout>
  <section>
    <h1>{book.name}</h1>
    <a class="go-back" href="/admin/books">Volver atras</a>


    <article>
      <div>
        <span>Autor:</span>
        <p>{book.author}</p>
      </div>
      <div>
        <span>Paginas:</span>
        <p>{book.pages}</p>
      </div>
      <div>
        <span>AÃ±o:</span>
        <p>{book.year}</p>
      </div>

      <div>
        <a class="update-button" href="/admin/books/update">Update Name</a>
      </div>

    </article>
    <DeleteBook idBook={book.id} client:load/>
  </section>
</Layout>

<style>
  h1 {
    margin-top: 50px;
    margin-bottom: 50px;
    color: peru;
    font-weight: 700;
    text-align: center;
  }

  article {
    width: 35%;
    margin: 0 auto;
    padding: 25px;
    border: 1px solid #7e6e9f;
    border-radius: 6px;
  }

  div {
    margin-left: 10dvw;
  }

  p {
    display: inline-block;
    color: whitesmoke;
  }

  span {
    margin-right: 8px;
    color: #8a78ae;
  }

  .update-button:hover {
    background: #add8e691;
    color: cornsilk;
  }

  .update-button {
    display: inline-block;
    padding: 15px 13px;
    height: 10px;
    line-height: 15px;
    text-decoration: none;
    border-radius: 8px;
    background-color: lightblue;
    color: black;
    cursor: pointer;
    transition: all ease 0.3s;
  }

  .go-back:hover {
    color: whitesmoke;
  }

  .go-back {
    text-decoration: none;
    color: #8a78ae;
    margin-top: 445px;
    margin-left: 35px;
    transition: color ease 0.3s;
  }
</style>